// Copyright (c) 2018-2025 Linh Pham
// wwdtm-theme is released under the terms of the MIT License
// SPDX-License-Identifier: MIT License
//
// vim: set noai syntax=python ts=4 sw=4:

// IBM Design Colors
@use "./colors-ibm" as ibm;

:root {
  // Adapted from: https://matthewjamestaylor.com/responsive-font-size
  --bs-body-font-size: clamp(14.5px, calc(14px + 0.325vw), 16.75px);
  --bs-font-serif: "IBM Plex Serif", "Cambria", "Liberation Serif", "Times", "Times New Roman", serif;
}

body {
  #skip-nav {
    color: $black;
  }

  .tooltip {
    font-size: 0.9em;
  }

  .bi-box-arrow-up-right::before {
    color: var(--bs-body-color) !important;
    font-size: 85% !important;
    vertical-align: initial !important;
  }

  .bi-envelope::before {
    color: var(--bs-body-color) !important;
  }
}

header {
  color: $white;

  .navbar {
    background-color: $navbar-bg-color;
    color: $white;

    .navbar-brand {
      color: $white;
      font-size: 1.5rem;
      font-weight: 600;
      margin-left: 0.4rem;
      vertical-align: middle;
    }

    .navbar-brand,
    .nav-link {
      color: $white;
    }

    .nav-item {
      hr {
        border: 1px solid ibm.$gray-50;
        color: ibm.$gray-50;
        opacity: 100;
      }
    }

    .nav-link {
      padding: var(--bs-nav-link-padding-y) $navbar-nav-link-padding-x * 1.25;
      font-weight: 500;
    }

    .nav-link:hover {
      background-color: $navbar-bg-navlink-hover-color;
      color: $white;
    }

    .offcanvas {
      background-color: $offcanvas-bg-color;

      .offcanvas-title {
        color: $white;
        font-size: 1.5rem;
        padding-top: 0.425rem;
      }

      .nav-link:hover {
        background-color: $offcanvas-bg-navlink-hover-color;
      }

      .dropdown-toggle {
        color: $white;
      }
    }

    .navbar-toggler {
      border: none;
      color: $white;
    }

    .navbar-toggler:focus {
      border: 1px dotted $white;
    }

    .dropdown-item.active,
    .dropdown-item:active {
      background-color: $offcanvas-bg-navlink-hover-color;
    }

    button#bd-theme {
      margin-left: 0.4rem;

      i {
        padding-right: 0.2rem;
      }
    }

    ul#theme-dropdown {
      button i {
        padding-right: 0.4rem;
      }

      button.dropdown-item {
        font-size: var(--bs-body-font-size);
      }
    }
  }
}

main {
  padding-top: 3.2rem;

  .p-3 {
    padding: 1.4rem !important;
  }

  a {
    border-bottom: 1px dotted;
    color: ibm.$blue-70;
    text-decoration: none;
  }

  h1,
  h2,
  h3 {
    margin: 1.2rem 0;
  }

  h2#welcome {
    margin-top: 0.4rem;
  }

  nav#nav-breadcrumb {
    background-color: ibm.$gray-10;
    margin: 0.2rem 0 1.6rem;
    padding: 1rem 1.2rem 1rem;
    --bs-breadcrumb-divider: ">";

    a {
      border-bottom: none;
      text-decoration: none;
    }

    .breadcrumb {
      margin-bottom: 0;

      .active {
        color: $black;
      }
    }
  }

  .accordion {
    .accordion-button {
      font-size: 1.2rem;
      font-weight: 500;
      color: revert;
    }

    .accordion-button:not(.collapsed) {
      color: inherit;
      background-color: ibm.$gray-10;
    }

    .accordion-button:disabled {
      font-weight: 400;
    }

    .accordion-button:disabled::after {
      background-image: none;
      background-repeat: unset;
      background-size: unset;
    }

    .accordion-header {
      margin: unset;
    }
  }

  .container-fluid.p-4 {
    padding: 2rem !important;
  }

  #year-list {
    column-count: 4;
    column-fill: balance;
    column-rule: none;
    list-style: none;
    margin-bottom: 2.4rem;
  }

  .info {
    margin-top: 0.4rem;
    padding-right: 0.8rem;

    h3.date,
    h4.date,
    h3.location,
    h3.name {
      font-size: 1.25em;
      font-weight: 500;
      padding-top: 1rem;

      a {
        border-bottom: none;
        text-decoration: none;
      }
    }

    .guests,
    .hosts,
    .locations,
    .pages,
    .panelists,
    .scorekeepers,
    .shows {
      padding-top: 1.2rem;
    }

    .data-tbd {
      font-style: italic;
    }

    .location-list,
    .name-list,
    .page-list,
    .report-list,
    .show-list {
      line-height: 2.5;
      margin-left: 0.2rem;
      margin-bottom: 3rem;

      i {
        padding-right: 0.6rem;
      }

      li {
        padding: 0.4rem 0.4rem 0.4rem 1.2rem;
      }

      a.disabled-link {
        border-bottom: none;
        color: revert !important;
        opacity: 0.7;
      }
    }

    .report-list {
      h3.title {
        font-size: 1.2rem;
      }

      .description {
        line-height: initial;
        margin-bottom: 1.4rem;
      }

      p {
        line-height: initial;
        margin-bottom: 1.2rem;
      }
    }

    .dms-coordinates,
    .score-exception,
    .help-notes {
      border-bottom: 1px dotted $tooltip-underline;
      cursor: help;
    }

    .dms-coordinates {
      margin-right: 0.4rem;
    }

    .map-link {
      padding-left: 0.4rem;
      text-wrap: nowrap;

      i {
        padding-right: 0.2rem;
      }
    }

    #map {
      height: 75vh;
      margin: 0.8rem auto 0.6rem;

      a::after {
        content: none;
      }

      a,
      a:link,
      a:hover,
      a:active,
      a:visited {
        color: #0d47a1 !important;
      }
    }

    .leaflet-container,
    .leaflet-control-zoom-in,
    .leaflet-control-zoom-out {
      font-family: inherit !important;
    }

    .leaflet-control-zoom a,
    .leaflet-control-zoom a:link,
    .leaflet-control-zoom a:hover,
    .leaflet-control-zoom a:active,
    .leaflet-control-zoom a:visited {
      color: #444 !important;
    }

    .leaflet-top,
    .leaflet-bottom {
      z-index: 500 !important;
    }

    #ww-chart {
      height: 65vh;
    }
  }

  .details {
    border-left: $details-border-width solid rgba($details-border-color, $details-border-opacity);
    margin: 1rem 0 2rem 0;
    padding-left: 1rem;

    .field-label {
      border-bottom: 1px solid $info-field-border-color;
      display: flex;
      font-weight: 600;
      margin-bottom: 0.4rem;
      padding-bottom: 0.2rem;
    }

    a:hover {
      color: $black;
    }

    .row {
      padding: 0.8rem 0 0.4rem;
    }

    .badge {
      font-weight: 600;
      margin: 0.2rem 0.6rem 0.2rem 0;
    }

    .badge.best-of {
      background-color: $badge-bg-best-of;
      color: $badge-text-best-of;
    }

    .badge.db-id {
      background-color: $badge-bg-db;
      color: $badge-text-db;
    }

    .badge.npr-link {
      background-color: $badge-bg-npr;
      color: $badge-text-npr;

      a {
        border-bottom: none;
        color: $badge-text-npr;
        text-decoration: none;

        i {
          padding-left: 0.6rem;
        }

        .bi-box-arrow-up-right::before {
          color: inherit !important;
        }
      }
    }

    .badge.repeat {
      background-color: $badge-bg-repeat;
      color: $badge-text-repeat;

      a {
        border-bottom: none;
        text-decoration: none;
        color: ibm.$blue-70;
      }

      a:hover {
        color: ibm.$black;
      }
    }

    .badge.guest {
      background-color: $badge-bg-guest;
      color: $badge-text-guest;
    }

    .badge.emeritus {
      background-color: $badge-bg-emeritus;
      color: $badge-text-emeritus;
    }

    .badge.pronouns {
      background-color: $badge-bg-pronouns;
      color: $badge-text-pronouns;
    }

    .bluff-info .sub-row {
      padding: 0;
    }

    .bluff-info .sub-row .field-label {
      border: none;
      display: inline-flex;
      padding-right: 0.2rem;
    }

    .bluff-info .sub-row .field-label::after {
      content: ":";
    }

    .rank {
      font-weight: 600;
    }

    .row ul {
      list-style: none;
      margin: 0;
      padding: 0 0 0.4rem;
    }

    .host-info .host-name,
    .scorekeeper-info,
    .scorekeeper-name {
      line-height: 1.625;
    }

    .scorekeeper-description {
      display: block;
      font-style: italic;
    }

    .stats,
    .panelist-info ul,
    .guest-info ul {
      line-height: 2;
    }

    .graph-list {
      column-count: 2;
      column-fill: balance;
      column-rule: none;
      line-height: 1.75;
    }

    .score {
      font-weight: 500;
      margin-left: 0.4rem;
      text-wrap: nowrap;
    }

    .bluff-segment-num {
      font-weight: 600;
    }

    .show-description-text,
    .show-notes-text {
      p:last-of-type {
        margin-bottom: 0;
      }

      ul {
        list-style: initial;
        line-height: 1.5;
        margin: revert;
        padding: revert;

        li {
          margin: revert;
          padding: revert;
        }
      }
    }

    .appearances,
    .recordings {

      .appearance-list,
      .recording-list {
        column-count: 3;
        column-fill: balance;
        column-rule: 1px dotted $info-field-border-color;
        line-height: 2.5;
        list-style: none;
        margin: 0;
        padding: 0;

        .badge {
          margin: 0.2rem 0 0.2rem 0.6rem;
        }

        .appearance-list.panelist {
          column-count: 2;
        }
      }

      .appearance-list.list-col-2,
      .recording-list.list-col-2 {
        column-count: 2;
      }
    }
  }

  @if $details-border-hover {
    .details:hover {
      border-left: 4px solid $details-border-hover-color;
    }
  }

  ul.name-list-pvp {
    list-style: none;
    padding-left: 0;

    li {
      margin-bottom: 0.6rem;
    }
  }

  .report.table> :not(caption)>*>* {
    padding: 0.6rem 0.8rem;
  }

  .report.table {

    thead,
    tfoot {
      th {
        background-color: ibm.$gray-10;
      }
    }

    th {
      text-align: center;
      vertical-align: middle;
    }

    tbody {
      .filled {
        background-color: ibm.$gray-10;
      }
    }

    col.state {
      width: 6rem;
    }

    col.boolean,
    col.count,
    col.date.year,
    col.score,
    col.stats.int {
      width: 6rem;
    }

    col.count.mix,
    col.date,
    col.stats.float {
      width: 8rem;
    }

    col.rank {
      width: 9rem;
    }

    col.city,
    col.date.medium,
    col.state.medium {
      width: 12rem;
    }

    col.count.long,
    col.score.long {
      width: 10rem;
    }

    col.label,
    col.name.host,
    col.name.scorekeeper {
      width: 12rem;
    }

    col.date.long,
    col.name.panelist,
    col.name.guest {
      width: 16rem;
    }

    col.name.guest.long,
    col.state.long {
      width: 20rem;
    }

    col.name.venue {
      width: 32rem;
    }

    col.notes {
      min-width: 28rem;
    }

    col.introduction {
      min-width: 36rem;
    }

    col.long-text {
      min-width: 48rem;
    }

    .description-text p,
    .notes-text p {
      margin-top: 0;
    }

    .description-text p:last-of-type,
    .notes-text p:last-of-type {
      margin-top: revert;
      margin-bottom: 0;
    }

    .description-text p:only-of-type,
    .notes-text p:only-of-type {
      margin-top: 0 !important;
      margin-bottom: 0 !important;
    }

    .description-text ul:last-of-type,
    .notes-text ul:last-of-type {
      margin-bottom: 0 !important;
    }

    td.notes p {
      margin-block-start: 0;
      margin-block-end: 1em;
      margin-inline-start: 0;
      margin-inline-end: 0;
    }

    td.score-higher,
    td.score-lower,
    td.score-tied {
      text-align: center;
    }

    td.score-higher {
      background-color: ibm.$green-20;
      color: $black;
      font-weight: 600;
    }

    td.score-tied {
      background-color: ibm.$blue-10;
      color: $black;
    }

    td.score-lower {
      background-color: inherit;
    }

    ul.no-bullets {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    span.hover.tooltip {
      cursor: help;
    }

    #appearance-by-year,
    #average-scores-by-year-all {
      max-height: 80vh;
      overflow: scroll;
    }

    #appearance-by-year col.name.panelist,
    #appearance-by-year td.name.panelist,
    #average-scores-by-year-all col.name.panelist,
    #average-scores-by-year-all td.name.panelist {
      min-width: 7.5rem;
    }

    #average-scores-by-year-all col.stats.float,
    #average-scores-by-year-all td.stats.float {
      min-width: 4.5rem;
    }

    .header-info {
      border-bottom: 1px dotted $tooltip-underline;
      cursor: help;
    }
  }

  .card.report-form {
    .card-header {
      font-weight: 600;
    }

    input,
    select {
      font-size: unset;
    }

    label,
    input.btn-submit {
      font-weight: 500;
    }

    input.btn-submit {
      background-color: ibm.$blue-70;
      color: $white;
    }
  }

  .static-page,
  .static-section {
    h2 {
      margin-bottom: 1.6rem;
    }

    #toc {
      font-size: 1.125rem;
      width: max-content;

      h3.toc-title {
        margin: 1.4rem 0 1rem;
      }

      ol,
      ul {
        li {
          line-height: 2;
        }
      }
    }

    .section-anchor::before {
      content: "";
      display: block;
      height: 3.6rem;
    }

    img {
      margin: 1.4rem auto;
    }
  }
}

footer {
  color: $white;

  a {
    border-bottom: 1px dotted;
    color: $white;
    text-decoration: none;
  }

  .footer.links {
    line-height: 2.25;
  }

  .links {
    background-color: $bg-footer-links;

    a {
      font-weight: 500;
    }

    ul {
      list-style: none;
      margin-bottom: 0;

      li {
        display: inline-block;
        margin: 0 0.4rem;
        padding: 0;
      }
    }
  }

  .copyright {
    background-color: $bg-footer-copyright;
  }
}

[data-bs-theme=retro] {

  --bs-body-bg: #{$body-bg-retro};
  --bs-body-bg-rgb: #{$body-bg-retro-rgb};
  --bs-body-color: #{$body-color-retro};
  --bs-body-color-rgb: #{$body-color-retro-rgb};
  --bs-border-color: #{$border-color-retro};
  --bs-border-color-rgb: #{$border-color-retro-rgb};
  --bs-body-font-family: #{$font-family-serif};
  --bs-font-sans-serif: #{$font-family-serif};


  body {
    background-color: $body-bg-retro;
    color: $body-color-retro;

    #skip-nav {
      color: $black;
    }

    .btn,
    .tooltip {
      font-family: $font-family-serif !important;
    }
  }

  header {
    nav {
      background-color: $navbar-bg-color-retro;
    }

    .navbar {
      .dropdown-item:hover {
        background-color: $navbar-dropdown-item-hover-retro;
      }

      .dropdown-item.active {
        background-color: $navbar-dropdown-item-active-retro;
      }

      .offcanvas {
        background-color: $offcanvas-bg-color-retro;
      }

      .nav-item {
        hr {
          border: 1px solid $offcanvas-hr-color-retro;
          color: $offcanvas-hr-color-retro;
        }
      }

      .nav-link:hover {
        background-color: $navbar-bg-navlink-hover-color-retro;
      }
    }
  }

  main {
    a {
      color: $site-link-color-retro !important;
    }

    a:visited {
      color: $site-link-visited-retro !important;
    }

    #nav-breadcrumb,
    .breadcrumb {
      background-color: $nav-breadcrumb-bg-color-retro;
    }

    @if $details-border-hover {
      .details:hover {
        border-left: 4px solid $details-border-hover-color;
      }
    }


    .details {
      border-left: $details-border-width solid rgba($details-border-color-retro, $details-border-opacity-retro);

      .field-label {
        border-bottom: 1px solid $info-field-border-color-retro;
      }

      .badge.best-of {
        background-color: $badge-bg-best-of-retro;
      }

      .badge.emeritus {
        background-color: $badge-bg-emeritus-retro;
      }

      .badge.db-id {
        background-color: $badge-bg-db-retro;
      }

      .badge.guest {
        background-color: $badge-bg-guest-retro;
      }

      .badge.npr-link {
        background-color: $badge-bg-npr-retro;

        a {
          color: $badge-npr-link-retro !important;
        }

        a:visited {
          color: $badge-npr-link-visited-retro !important;
        }
      }

      .badge.pronouns {
        background-color: $badge-bg-pronouns-retro;
      }

      .badge.repeat {
        background-color: $badge-bg-repeat-retro;

        a {
          color: $badge-repeat-link-retro;
        }

        a:visited {
          color: $site-link-visited-retro !important;
        }
      }
    }

    @if $details-border-hover {
      .details:hover {
        border-left: 4px solid inherit;
      }
    }

    .info {

      .dms-coordinates,
      .score-exception,
      .help-notes {
        border-bottom: 1px dotted $tooltip-underline-retro;
      }

      .leaflet-control-zoom a,
      .leaflet-control-zoom a:link,
      .leaflet-control-zoom a:hover,
      .leaflet-control-zoom a:active,
      .leaflet-control-zoom a:visited,
      #map a,
      #map a:link,
      #map a:hover,
      #map a:active {
        color: $leaflet-link-color-retro !important;
      }

      .leaflet-control-zoom a:visited,
      #map a:visited {
        color: $site-link-visited-retro !important;
      }
    }

    .appearances,
    .recordings {

      .appearance-list,
      .recording-list {
        column-rule: 1px dotted $info-field-border-color-retro;
      }
    }

    .report.table {

      thead,
      tfoot {
        th {
          background-color: $table-headfoot-bg-retro;
        }
      }

      tbody {
        .filled {
          background-color: $table-filled-bg-retro;
        }
      }

      td.score-higher {
        background-color: $table-score-higher-bg-retro;
        color: $black;
        font-weight: 600;
      }

      td.score-tied {
        background-color: $table-score-tied-bg-retro;
        color: $black;
      }

      .header-info {
        border-bottom: 1px dotted $tooltip-underline-retro;
      }
    }
  }

  .card.report-form {
    input.btn-submit {
      background-color: $btn-submit-color-retro;
    }
  }

  footer {
    .links {
      background-color: $bg-footer-links-retro !important;
    }

    .copyright {
      background-color: $bg-footer-copyright-retro;
    }
  }
}

[data-bs-theme=dark] {
  body {
    #skip-nav {
      color: $white;
    }
  }

  main {
    a {
      color: ibm.$blue-40;
    }

    #nav-breadcrumb {
      background-color: ibm.$gray-80;

      .breadcrumb {
        .active {
          color: $white;
        }
      }
    }

    .accordion-button:not(.collapsed) {
      background-color: ibm.$gray-80;
      box-shadow: unset;
    }

    .info {

      .dms-coordinates,
      .score-exception,
      .help-notes {
        border-bottom: 1px dotted $tooltip-underline-dark;
      }
    }

    .details {
      a:hover {
        color: $white;
      }

      .badge.db-id {
        background-color: $badge-bg-db-dark;
        color: $badge-text-db-dark;
      }
    }

    .name-list {
      column-rule: 1px dotted rgba($white, 0.6);
    }

    .report.table {

      thead,
      tfoot {
        th {
          background-color: ibm.$gray-80;
          color: $white;
        }
      }

      tbody {
        .filled {
          background-color: ibm.$gray-80;
        }
      }

      .header-info {
        border-bottom: 1px dotted $tooltip-underline-dark;
      }
    }
  }
}

@media only screen and (max-width: 1201px) {
  header {
    .navbar {
      button#bd-theme {
        margin-left: 0;
      }

      .nav-link {
        i {
          padding-right: 0.3rem;
        }
      }

      #bd-theme-text {
        padding-left: 0.35rem;
        padding-right: 0.2rem;
      }

      .navbar-brand {
        margin-right: 0.4rem;
      }
    }
  }

  .details {
    .appearances {
      .appearance-list.panelist {
        column-count: 2;
      }
    }
  }
}

@media only screen and (max-width: 1199px) {
  main {
    ul.name-list-pvp {
      column-count: 4;
    }
  }
}

@media only screen and (max-width: 950px) {
  footer {
    .footer.links {
      line-height: 2.5;
    }
  }
}

@media only screen and (max-width: 801px) {
  main {
    padding-top: 3rem;

    #year-list {
      column-count: 3;
    }

    .details {

      .appearances,
      .recordings {

        .appearance-list,
        .recording-list {
          column-count: 2;
        }

        .appearance-list.panelist {
          column-count: 1;
        }
      }
    }

    .info {
      .name-list {
        column-count: 2;
      }
    }

    ul.name-list-pvp {
      column-count: 3;
    }
  }

  footer {
    .footer.links {
      line-height: 2.625;
    }
  }
}

@media only screen and (max-width: 767px) {
  main {
    .details {

      .col-md-6.scorekeeper-info,
      .col-md-6.guest-info,
      .col-md-6.coordinates,
      .col-md-6.appearances-all,
      .col-md-6.recordings-all,
      .col-md-6.scoring-stats,
      .col-md-6.bluff-stats {
        margin-top: 1.2rem;
        margin-bottom: 0.4rem;
      }

      .bluff-segment-num {
        font-weight: 600;
        padding-bottom: 0.6rem;
      }

      .graph-list {
        column-count: 1;
      }
    }

    .info {
      .name-list {
        margin-left: 0.6rem;
        padding-right: 0;
      }

      #map {
        height: 62.5vh;
        margin: 0.6rem auto;
      }
    }
  }
}

@media only screen and (max-width: 601px) {
  header {
    .navbar {
      h1 {
        margin-top: 0.2rem;
        margin-bottom: 0.4rem;
      }
    }
  }

  main {
    .container-fluid.p-4 {
      padding: 1.4rem !important;
      margin-top: 0.4rem;
    }

    .details {
      .badge {
        margin: 0.2rem 0.4rem 0.4rem 0;
      }

      .col-md-6.scorekeeper-info,
      .col-md-6.guest-info {
        margin-top: 1.25rem;
        margin-bottom: .375rem;
      }

      .appearances,
      .recordings {

        .appearance-list,
        .appearance-list.list-col-2,
        .recording-list,
        .recording-list.list-col-2 {
          column-count: 1;
        }
      }
    }

    .info {
      .name-list {
        column-count: 1;
      }
    }
  }

  footer {
    .copyright-text {
      line-height: 2;
    }
  }
}

@media only screen and (max-width: 569px) {
  main {
    ul.name-list-pvp {
      column-count: 2;
    }
  }
}